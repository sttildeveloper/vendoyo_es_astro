---
import { SEO as AstroSEO } from 'astro-seo';

interface Props {
  title?: string;
  description?: string;
  image?: string;
  canonical?: string;
  noindex?: boolean;
}

const {
  title = 'VendoYo - Tu inmobiliaria en tu bolsillo',
  description = 'App movil para gestionar propiedades, franquicias y agencias inmobiliarias. Sube propiedades, asigna franquicias y realiza seguimiento en tiempo real.',
  image = '/og-image.svg',
  canonical,
  noindex = false,
} = Astro.props;

const siteName = 'VendoYo';
const canonicalUrl = canonical || (Astro.site ? new URL(Astro.url.pathname, Astro.site).href : Astro.url.href);
const ogImageUrl = Astro.site ? new URL(image, Astro.site).href : image;
---

<AstroSEO
  title={title}
  description={description}
  canonical={canonicalUrl}
  noindex={noindex}
  openGraph={{
    basic: {
      title,
      type: 'website',
      image: ogImageUrl,
      url: canonicalUrl,
    },
    optional: {
      description,
      siteName,
      locale: 'es_ES',
    },
  }}
  twitter={{
    card: 'summary_large_image',
    title,
    description,
    image: ogImageUrl,
  }}
  extend={{
    link: [
      { rel: 'icon', href: '/favicon.svg', type: 'image/svg+xml' },
      { rel: 'shortcut icon', href: '/favicon.svg', type: 'image/svg+xml' },
      { rel: 'apple-touch-icon', href: '/favicon.svg' },
      { rel: 'mask-icon', href: '/favicon.svg' },
      { rel: 'manifest', href: '/site.webmanifest' },
    ],
    meta: [
      { name: 'theme-color', content: '#3CB4AC' },
      { name: 'application-name', content: siteName },
      { name: 'apple-mobile-web-app-title', content: siteName },
      { name: 'format-detection', content: 'telephone=no' },
      { name: 'msapplication-TileColor', content: '#0f172a' },
      { name: 'author', content: siteName },
    ],
  }}
/>

<script is:inline
  type="application/ld+json"
  set:html={JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'MobileApplication',
    name: 'VendoYo',
    operatingSystem: 'iOS, Android',
    applicationCategory: 'BusinessApplication',
    offers: {
      '@type': 'Offer',
      price: '0',
      priceCurrency: 'EUR',
    },
    description,
    inLanguage: 'es',
  })}
/>

---
import { Icon } from 'astro-icon/components';

const features = [
  {
    icon: 'heroicons:home',
    title: 'Sube tu propiedad',
    description:
      'Añade propiedades fácilmente con fotos, descripción y precio. Todo en segundos desde tu móvil.',
  },
  {
    icon: 'heroicons:building-office-2',
    title: 'Asigna una franquicia',
    description:
      'Conecta con agencias locales y gestiona múltiples franquicias desde una sola app.',
  },
  {
    icon: 'heroicons:chart-bar',
    title: 'Seguimiento en vivo',
    description: 'Monitoriza visitas, ofertas y el estado de tus propiedades en tiempo real.',
  },
];
---

<section id="features" class="section bg-brand-primary-soft/20">
  <div class="text-center mb-16" data-features-header>
    <span class="badge mb-4">
      <Icon name="heroicons:sparkles" class="w-4 h-4" />
      Características
    </span>
    <h2 class="text-4xl md:text-5xl font-bold text-neutral-text mb-4">
      Todo lo que necesitas en <span class="gradient-text">una app</span>
    </h2>
    <p class="text-xl text-neutral-muted max-w-2xl mx-auto">
      Gestiona tu negocio inmobiliario de forma profesional y sencilla.
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    {
      features.map((feature, index) => (
        <div class="card-hover group" data-feature-card style={`animation-delay: ${index * 100}ms`}>
          <div class="w-14 h-14 bg-brand-primary-soft rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
            <Icon name={feature.icon} class="w-7 h-7 text-brand-primary" />
          </div>
          <h3 class="text-xl font-bold text-neutral-text mb-2">{feature.title}</h3>
          <p class="text-neutral-muted">{feature.description}</p>
        </div>
      ))
    }
  </div>
</section>

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  if (!prefersReducedMotion) {
    // Animate header
    gsap.from('[data-features-header]', {
      scrollTrigger: {
        trigger: '[data-features-header]',
        start: 'top 80%',
      },
      opacity: 0,
      y: 50,
      duration: 0.8,
      ease: 'power3.out',
    });

    // Animate feature cards
    gsap.from('[data-feature-card]', {
      scrollTrigger: {
        trigger: '[data-feature-card]',
        start: 'top 85%',
      },
      opacity: 0,
      y: 60,
      stagger: 0.15,
      duration: 0.8,
      ease: 'power3.out',
    });
  }
</script>

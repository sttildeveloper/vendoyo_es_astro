---
import { Icon } from 'astro-icon/components';
---

<header
  id="header"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-500"
  x-data="{ 
    mobileMenuOpen: false, 
    scrolled: false 
  }"
  x-init="() => {
    window.addEventListener('scroll', () => {
      scrolled = window.scrollY > 50;
    });
  }"
  :class="scrolled ? 'bg-white/95 backdrop-blur-md shadow-md py-2 border-b border-neutral-border' : 'bg-white/50 backdrop-blur-sm py-4 border-b border-transparent'"
>
  <nav class="section !py-0">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="#" class="flex items-center gap-2 group">
        <span
          class="text-2xl font-bold tracking-tight flex items-center gap-2 transition-colors duration-300 text-brand-primary"
          >VendoYo <Icon name="circle-flags:ua" class="w-5 h-5 shadow-sm opacity-90" /></span
        >
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-8">
        <a href="#features" class="nav-link" :class="scrolled ? 'text-neutral-text hover:text-brand-primary' : 'text-neutral-muted hover:text-brand-primary'">Características</a>
        <a href="#app-showcase" class="nav-link" :class="scrolled ? 'text-neutral-text hover:text-brand-primary' : 'text-neutral-muted hover:text-brand-primary'">App Móvil</a>
        <a href="#pricing" class="nav-link" :class="scrolled ? 'text-neutral-text hover:text-brand-primary' : 'text-neutral-muted hover:text-brand-primary'">Precios</a>
      </div>

      <!-- Desktop CTAs -->
      <div class="hidden md:flex items-center gap-4">
        <a 
          href="#download" 
          class="px-6 py-2.5 rounded-xl font-bold transition-all duration-300 text-sm bg-brand-primary text-white hover:bg-brand-primary-dark shadow-lg shadow-brand-primary/20"
        >
          Descargar App
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        @click="mobileMenuOpen = !mobileMenuOpen"
        class="md:hidden p-2 transition-colors rounded-lg focus:outline-none text-neutral-text"
        aria-label="Toggle menu"
      >
        <Icon name="heroicons:bars-3" class="w-7 h-7" x-show="!mobileMenuOpen" />
        <Icon name="heroicons:x-mark" class="w-7 h-7" x-show="mobileMenuOpen" x-cloak />
      </button>
    </div>

    <!-- Mobile Menu -->
    <div
      x-show="mobileMenuOpen"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 -translate-y-4"
      x-transition:enter-end="opacity-100 translate-y-0"
      class="md:hidden mt-4 pt-4 border-t border-neutral-border space-y-2 bg-white rounded-2xl p-4 shadow-xl text-neutral-text"
      x-cloak
    >
      <a href="#features" @click="mobileMenuOpen = false" class="block p-3 font-bold hover:bg-brand-soft rounded-xl transition-colors">
        Características
      </a>
      <a href="#app-showcase" @click="mobileMenuOpen = false" class="block p-3 font-bold hover:bg-brand-soft rounded-xl transition-colors">
        App Móvil
      </a>
      <a href="#pricing" @click="mobileMenuOpen = false" class="block p-3 font-bold hover:bg-brand-soft rounded-xl transition-colors"> 
        Precios 
      </a>

      <div class="pt-4 mt-2 border-t border-neutral-border">
        <a
          href="#download"
          @click="mobileMenuOpen = false"
          class="w-full bg-brand-primary text-white font-bold py-3.5 rounded-xl flex items-center justify-center shadow-lg"
        >
          Descargar App
        </a>
      </div>
    </div>
  </nav>
</header>

<style>
  [x-cloak] {
    display: none !important;
  }
  .nav-link {
    font-size: 0.95rem;
    font-weight: 600;
    transition: all 0.3s ease;
  }
</style>
